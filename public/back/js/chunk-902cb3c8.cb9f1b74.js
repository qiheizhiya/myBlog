(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-902cb3c8"],{1428:function(e,t,s){},b0c0:function(e,t,s){var i=s("83ab"),r=s("9bf2").f,a=Function.prototype,c=a.toString,l=/^\s*function ([^ (]*)/,n="name";i&&!(n in a)&&r(a,n,{configurable:!0,get:function(){try{return c.call(this).match(l)[1]}catch(e){return""}}})},e363:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),s("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[s("el-form-item",{attrs:{prop:"title"}},[s("el-input",{attrs:{placeholder:"标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title","string"===typeof t?t.trim():t)},expression:"ruleForm.title"}})],1),s("el-form-item",{attrs:{prop:"description"}},[s("el-input",{attrs:{placeholder:"描述"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description","string"===typeof t?t.trim():t)},expression:"ruleForm.description"}})],1),s("el-form-item",{attrs:{prop:"musicName"}},[s("el-input",{attrs:{placeholder:"音乐名称"},model:{value:e.ruleForm.musicName,callback:function(t){e.$set(e.ruleForm,"musicName","string"===typeof t?t.trim():t)},expression:"ruleForm.musicName"}})],1)],1),s("div",{staticClass:"imgs flex align-center"},[s("el-upload",{staticClass:"upload",attrs:{drag:"",action:e.mainUrl+"/ossUpload",accept:"image/*","on-success":e.handleAvatarSuccess,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.imgUrl?s("img",{staticClass:"avatar",attrs:{src:e.imgUrl}}):e._e(),e.imgUrl?e._e():s("i",{staticClass:"iconfont icon-jurassic_image"}),e.imgUrl?e._e():s("div",{staticClass:"el-upload__text"},[e._v("封面图片 (680*440)")])]),s("el-upload",{staticClass:"upload",attrs:{drag:"","show-file-list":!1,accept:"audio/*",action:e.mainUrl+"/ossUpload","on-success":e.handleMusicSuccess,"before-upload":e.beforeMusicUpload}},[s("i",{staticClass:"iconfont icon-Music1"}),s("div",{staticClass:"el-upload__text"},[e._v(e._s(e.musicText))])])],1),s("div",{staticClass:"markDown"},[s("mavon-editor",{attrs:{subfield:!0},on:{save:e.mkSave,change:e.mkChange},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),1===e.userInfo.id?s("div",{staticClass:"submit flex align-center"},[s("el-button",{staticClass:"subBtn",attrs:{type:"primary",icon:"el-icon-position"},on:{click:e.addArticle}},[e._v("发布")])],1):e._e()],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title flex align-center"},[s("div",{staticClass:"flex align-center"},[s("span"),e._v("无所谓好或不好，人生一场虚空大梦，韶华白首，不过转瞬。惟有天道恒在，往复循环，不曾更改！")])])}],a=(s("b0c0"),s("5530")),c=s("b775"),l=function(e){return c["a"].post("/api/article/addArticle",e)},n=s("2f62"),o={data:function(){return{ruleForm:{title:"",description:"",musicName:"",content:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:0,max:20,message:"不能超过20个字",trigger:"blur"}]},imgUrl:"",musicUrl:"",musicText:"背景音乐"}},computed:Object(a["a"])({},Object(n["c"])(["userInfo"])),methods:{mkChange:function(e,t){this.content=e},mkSave:function(e,t){this.content=e},beforeAvatarUpload:function(e){var t=e.size/1024/1024<4;return t||this.$message.error("上传封面图片大小不能超过 4MB!"),t},handleAvatarSuccess:function(e,t){this.imgUrl=e.data,this.$message.success("图片上传成功")},beforeMusicUpload:function(e){var t=e.size/1024/1024<4;return t||this.$message.error("上传音频大小不能超过4MB!"),t&&(this.musicText=e.name),t},handleMusicSuccess:function(e,t){this.musicUrl=e.data,this.$message.success("音频上传成功")},addArticle:function(){var e=this;if(this.imgUrl)if(this.ruleForm.content){var t=Object(a["a"])(Object(a["a"])({},this.ruleForm),{},{imgUrl:this.imgUrl,musicUrl:this.musicUrl,content:this.content});l(t).then((function(t){e.$message.success("添加文章成功")}))}else this.$message.error("文章内容不能为空");else this.$message.error("封面图片不能为空")}}},u=o,m=(s("f86c"),s("2877")),d=Object(m["a"])(u,i,r,!1,null,"fe00bb56",null);t["default"]=d.exports},f86c:function(e,t,s){"use strict";var i=s("1428"),r=s.n(i);r.a}}]);